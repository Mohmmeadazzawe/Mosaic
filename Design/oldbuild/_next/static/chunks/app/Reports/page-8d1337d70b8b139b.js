(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5838],{2896:e=>{e.exports={container:"ReportsDetails_container__6xYba",contentArea:"ReportsDetails_contentArea__xK1jB",mainContent:"ReportsDetails_mainContent__6JsZt",sidebar:"ReportsDetails_sidebar__FDHjE",titlesections:"ReportsDetails_titlesections__PB3FE",searchContainer:"ReportsDetails_searchContainer__G_oea",searchInput:"ReportsDetails_searchInput__xw1Py",sections:"ReportsDetails_sections__NbnG8",tagsSection:"ReportsDetails_tagsSection__xwI6i",quickLink:"ReportsDetails_quickLink__HASlV",arrow:"ReportsDetails_arrow__1EkGZ",tagsList:"ReportsDetails_tagsList__K3ut3",tagChip:"ReportsDetails_tagChip__Ka0b_",articleContainer:"ReportsDetails_articleContainer__VMKog",title:"ReportsDetails_title__clvQ3",imageContainer:"ReportsDetails_imageContainer__FiGYJ",imageWrapper:"ReportsDetails_imageWrapper__lYG_J",image:"ReportsDetails_image__LEU1w",metaInfo:"ReportsDetails_metaInfo__cjh_S",dateContainer:"ReportsDetails_dateContainer__FqoC6",tagsContainer:"ReportsDetails_tagsContainer__TwrAe",tag:"ReportsDetails_tag__NGHZE",content:"ReportsDetails_content__BaHR3",descriptionContent:"ReportsDetails_descriptionContent__VpWlm",downloadButton:"ReportsDetails_downloadButton__tNCyr",downloadIcon:"ReportsDetails_downloadIcon__8q5Gy"}},3840:(e,t,a)=>{Promise.resolve().then(a.bind(a,6732))},4436:(e,t,a)=>{"use strict";a.d(t,{k5:()=>d});var s=a(2115),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},r=s.createContext&&s.createContext(n),i=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach(function(t){var s,n,r;s=e,n=t,r=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function d(e){return t=>s.createElement(p,o({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,a)=>s.createElement(t.tag,c({key:a},t.attr),e(t.child)))}(e.child))}function p(e){var t=t=>{var a,{attr:n,size:r,title:l}=e,d=function(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,i),p=r||t.size||"1em";return t.className&&(a=t.className),e.className&&(a=(a?a+" ":"")+e.className),s.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,d,{className:a,style:c(c({color:e.color||t.color},t.style),e.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),l&&s.createElement("title",null,l),e.children)};return void 0!==r?s.createElement(r.Consumer,null,e=>t(e)):t(n)}},5089:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var s=a(5155),n=a(8453),r=a.n(n);function i(e){let{text:t="جاري التحميل",subtext:a="يرجى الانتظار قليلاً",size:n="medium",className:i=""}=e;return(0,s.jsxs)("div",{className:"".concat(r().loadingContainer," ").concat(r()[n]," ").concat(i),children:[(0,s.jsx)("div",{className:r().loadingSpinner}),(0,s.jsxs)("div",{className:r().loadingText,children:[t,(0,s.jsx)("span",{className:r().loadingDots})]}),a&&(0,s.jsx)("div",{className:r().loadingSubtext,children:a})]})}},5249:e=>{e.exports={container:"Reports_container__MVO8E",mainTitle:"Reports_mainTitle____L7q",content:"Reports_content__Pksle",mainContent:"Reports_mainContent__QOtni",blogPost:"Reports_blogPost__FiJe1",imageContainer:"Reports_imageContainer__RTCKK",postImage:"Reports_postImage__5M37C",postContent:"Reports_postContent__l_V58",postTitle:"Reports_postTitle__rYeMW",postMeta:"Reports_postMeta__RVtvi",dateContainer:"Reports_dateContainer__M_GIN",tagsContainer:"Reports_tagsContainer__eFlO0",calendarIcon:"Reports_calendarIcon__IS9zh",tagIcon:"Reports_tagIcon__CEPo2",tag:"Reports_tag__tD8X_",sidebar:"Reports_sidebar__RgAQh",searchContainer:"Reports_searchContainer__XtRL6",searchInput:"Reports_searchInput__wFxSX",sections:"Reports_sections__xSTh3",tagsSection:"Reports_tagsSection__tgABg",quickLink:"Reports_quickLink__W3UmU",arrow:"Reports_arrow__Ks7bK",tagsList:"Reports_tagsList__CQWT3",tagChip:"Reports_tagChip__4JV3d",activeTag:"Reports_activeTag__N0PUi",filterMessage:"Reports_filterMessage__jYHYY",clearFilter:"Reports_clearFilter____Xa_",pagination:"Reports_pagination__EeVtV",activePage:"Reports_activePage__OP10O"}},5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},6732:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var s=a(5155),n=a(2115),r=a(5695),i=a(6766),o=a(5249),l=a.n(o),c=a(9911),d=a(7185),p=a(3268),_=a(5089);let h=()=>{let e=(0,r.useRouter)(),[t,a]=(0,n.useState)([]),[o,h]=(0,n.useState)([]),[m,u]=(0,n.useState)(!0),[g,j]=(0,n.useState)(null),[f,x]=(0,n.useState)(""),[v,b]=(0,n.useState)(1),[N]=(0,n.useState)(3),C=(0,d.B)(),{lang:R}=(0,p.o)();(0,n.useEffect)(()=>{(async()=>{u(!0);try{let e=new URLSearchParams;if(f&&e.append("search",f),g){let t=o.find(e=>e.name===g);t&&e.append("tag_id",t.id.toString())}let t="".concat("https://app.mosaic-hrd.org/api","/reports/paginated?").concat(e.toString());console.log("Fetching from URL:",t);let s=await fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Accept-Language":R}});if(console.log("Response status:",s.status),!s.ok)throw Error("Failed to fetch: ".concat(s.statusText));let n=await s.json();if(console.log("Reports API Response:",n),n&&n.data){console.log("Processed reports data:",n.data.reports||[]),console.log("Processed tags data:",n.data.report_tags||[]);let e=[...n.data.reports||[]].sort((e,t)=>new Date(t.publishing_date).getTime()-new Date(e.publishing_date).getTime());a(e),0===o.length&&h(n.data.report_tags||[])}else console.log("No reports found in response"),a([]),0===o.length&&h([])}catch(e){console.error("Failed to fetch reports:",e),a([]),0===o.length&&h([])}finally{u(!1)}})()},[f,g,o,R]);let w=[{href:"/",label:C("home")},{href:"/Projects",label:C("projects")},{href:"/Statistics",label:C("statistics")},{href:"/about",label:C("about")},{href:"/Reports",label:C("reports")},{href:"/News",label:C("news")},{href:"/Activities",label:C("activities")},{href:"/Joinus",label:C("joinus")},{href:"/contact",label:C("contact")}],y=t.filter(e=>{let t=!g||e.tags.some(e=>e.name===g),a=!f.trim()||e.name.toLowerCase().includes(f.toLowerCase())||e.tags.some(e=>e.name.toLowerCase().includes(f.toLowerCase()));return t&&a}),P=v*N,S=y.slice(P-N,P),D=Math.ceil(y.length/N),O=e=>b(e),L=[];for(let e=1;e<=D;e++)L.push(e);let k=t=>{e.push("/Reports?id=".concat(t))},T=e=>{j(g===e?null:e)};return m?(0,s.jsx)(_.default,{text:C("loading")}):(0,s.jsxs)("div",{className:l().container,children:[(0,s.jsx)("h1",{className:l().mainTitle,children:"Reports"}),(0,s.jsxs)("div",{className:l().content,children:[(0,s.jsxs)("div",{className:l().mainContent,children:[g&&(0,s.jsxs)("div",{className:l().filterMessage,children:[(0,s.jsxs)("span",{children:["عرض النتائج لوسم: ",(0,s.jsx)("strong",{children:g})]}),(0,s.jsx)("button",{onClick:()=>j(null),className:l().clearFilter,children:"إلغاء الفلترة"})]}),S.map(e=>(0,s.jsxs)("div",{className:l().blogPost,onClick:()=>k(e.id),style:{cursor:"pointer"},children:[(0,s.jsx)("div",{className:l().imageContainer,children:(0,s.jsx)(i.default,{src:e.image,alt:e.name,width:200,height:150,className:l().postImage})}),(0,s.jsxs)("div",{className:l().postContent,children:[(0,s.jsx)("p",{className:l().postTitle,children:e.name}),(0,s.jsxs)("div",{className:l().postMeta,children:[(0,s.jsxs)("div",{className:l().dateContainer,children:[(0,s.jsx)(c.LyP,{color:"#0070f3",className:l().calendarIcon}),(0,s.jsxs)("span",{children:[C("publishingDate")," : ",e.publishing_date]})]}),(0,s.jsxs)("div",{className:l().tagsContainer,children:[(0,s.jsx)(c.wJQ,{color:"#0070f3",className:l().tagIcon}),(0,s.jsxs)("span",{children:[C("tags")," : "]}),e.tags&&e.tags.map((e,t)=>(0,s.jsx)("span",{className:l().tag,children:e.name},e.id||t))]})]})]})]},e.id)),D>1&&(0,s.jsxs)("div",{className:l().pagination,children:[(0,s.jsx)("button",{onClick:()=>{v>1&&b(v-1)},disabled:1===v,children:"< Previous"}),L.map(e=>(0,s.jsx)("button",{onClick:()=>O(e),className:v===e?l().activePage:"",children:e},e)),(0,s.jsx)("button",{onClick:()=>{v<D&&b(v+1)},disabled:v===D,children:"Next >"})]})]}),(0,s.jsxs)("div",{className:l().sidebar,children:[(0,s.jsx)("div",{className:l().searchContainer,children:(0,s.jsx)("input",{type:"search",placeholder:C("searchPlaceholder"),className:l().searchInput,value:f,onChange:e=>x(e.target.value)})}),(0,s.jsxs)("div",{className:l().sections,children:[(0,s.jsx)("h2",{children:C("sections")}),w.map((e,t)=>(0,s.jsxs)("a",{href:e.href,className:l().quickLink,children:[(0,s.jsx)("span",{children:e.label}),(0,s.jsx)(c.X6T,{color:"#0070f3",className:l().arrow})]},t))]}),(0,s.jsxs)("div",{className:l().tagsSection,children:[(0,s.jsx)("h2",{children:C("tags")}),(0,s.jsx)("div",{className:l().tagsList,children:o.length>0?o.map(e=>(0,s.jsx)("span",{className:"".concat(l().tagChip," ").concat(g===e.name?l().activeTag:""),onClick:()=>T(e.name),style:{cursor:"pointer"},children:e.name},e.id)):(0,s.jsx)("span",{children:"No tags available"})})]})]})]})]})};var m=a(2896),u=a.n(m);async function g(e,t){try{let a=await fetch("https://app.mosaic-hrd.org/api/reports/".concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Accept-Language":t}});if(!a.ok)throw Error("Failed to fetch: ".concat(a.statusText));let s=await a.json();if(s&&s.data&&s.data.report)return s.data.report;return null}catch(e){return console.error("Error fetching report:",e),null}}function j(e){let{id:t}=e,[a,r]=(0,n.useState)(null),[o,l]=(0,n.useState)(!0),[_,h]=(0,n.useState)(null),m=(0,d.B)(),{lang:j}=(0,p.o)();(0,n.useEffect)(()=>{(async()=>{try{let e=await g(t,j);e?r(e):h("لم يتم العثور على التقرير")}catch(e){h("حدث خطأ أثناء جلب البيانات")}finally{l(!1)}})()},[t,j]);let f=[{href:"/",label:m("home")},{href:"/Projects",label:m("projects")},{href:"/Statistics",label:m("statistics")},{href:"/about",label:m("about")},{href:"/Reports",label:m("reports")},{href:"/News",label:m("news")},{href:"/Activities",label:m("activities")},{href:"/Joinus",label:m("joinus")},{href:"/contact",label:m("contact")}];return o?(0,s.jsx)("div",{className:u().container,children:(0,s.jsx)("div",{children:"جاري التحميل..."})}):_||!a?(0,s.jsx)("div",{className:u().container,children:(0,s.jsxs)("div",{children:["خطأ: ",_||"لم يتم العثور على التقرير"]})}):(0,s.jsxs)("div",{className:u().container,children:[(0,s.jsxs)("div",{className:u().contentArea,children:[(0,s.jsx)("div",{className:u().mainContent,children:(0,s.jsxs)("div",{className:u().articleContainer,children:[(0,s.jsx)("div",{className:u().imageContainer,children:(0,s.jsx)("div",{className:u().imageWrapper,children:(0,s.jsx)(i.default,{src:a.image,alt:a.name,fill:!0,className:u().image,style:{objectFit:"cover"}})})}),(0,s.jsx)("div",{className:u().metaInfo,children:(0,s.jsxs)("div",{className:u().dateContainer,children:[(0,s.jsx)(c.LyP,{color:"#0070f3",className:u().calendarIcon}),(0,s.jsxs)("span",{children:[m("publishingDate"),": ",new Date(a.publishing_date).toLocaleDateString("ar-SA")]})]})}),(0,s.jsxs)("div",{className:u().content,children:[(0,s.jsxs)("div",{className:u().tagsContainer,children:[(0,s.jsx)(c.wJQ,{color:"#0070f3",className:u().tagIcon}),(0,s.jsxs)("span",{children:[m("tags"),": "]}),a.tags&&a.tags.map((e,t)=>(0,s.jsx)("span",{className:u().tag,children:e.name},e.id||t))]}),(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:a.description},className:u().descriptionContent})]})]})}),(0,s.jsxs)("div",{className:u().sidebar,children:[(0,s.jsx)("div",{className:u().searchContainer,children:(0,s.jsx)("input",{type:"search",placeholder:m("searchPlaceholder"),className:u().searchInput})}),(0,s.jsx)("h2",{className:u().titlesections,children:m("sections")}),(0,s.jsx)("div",{className:u().sections,children:f.map((e,t)=>(0,s.jsxs)("a",{href:e.href,className:u().quickLink,children:[(0,s.jsx)("span",{children:e.label}),(0,s.jsx)(c.X6T,{color:"#0070f3",className:u().arrow})]},t))}),(0,s.jsxs)("div",{className:u().tagsSection,children:[(0,s.jsx)("h2",{children:m("tags")}),(0,s.jsx)("div",{className:u().tagsList,children:["Tag 1","Tag 2","Tag 3","Tag 4"].map((e,t)=>(0,s.jsx)("span",{className:u().tagChip,children:e},t))})]})]})]}),(0,s.jsx)("h1",{className:u().title,children:a.name}),a.pdf&&(0,s.jsxs)("a",{href:a.pdf,target:"_blank",rel:"noopener noreferrer",className:u().downloadButton,children:[(0,s.jsx)(c.WCW,{style:{marginLeft:"ar"===j?"0.5rem":0,marginRight:"en"===j?"0.5rem":0}}),"ar"===j?"تحميل PDF":"Download PDF"]})]})}function f(){let e=(0,r.useSearchParams)().get("id");return e?(0,s.jsx)("main",{children:(0,s.jsx)(j,{id:e})}):(0,s.jsx)("main",{children:(0,s.jsx)(h,{})})}function x(){return(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)(_.default,{}),children:(0,s.jsx)(f,{})})}},8453:e=>{e.exports={loadingContainer:"Loading_loadingContainer__xYplO",loadingSpinner:"Loading_loadingSpinner__M270_",loadingPulse:"Loading_loadingPulse__Qaw_K",loadingText:"Loading_loadingText___vDh_",loadingSubtext:"Loading_loadingSubtext__wQMxs",loadingDots:"Loading_loadingDots__WkQtU",small:"Loading_small__OUu1F",medium:"Loading_medium__Pt9vT",large:"Loading_large__Xyjja"}}},e=>{var t=t=>e(e.s=t);e.O(0,[8066,593,6711,6766,7185,8441,1684,7358],()=>t(3840)),_N_E=e.O()}]);
