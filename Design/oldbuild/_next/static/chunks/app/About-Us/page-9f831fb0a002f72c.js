(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[611],{646:e=>{e.exports={container:"ProjectsCenter_container__PFfxF",sectionsWrapper:"ProjectsCenter_sectionsWrapper__JfkcN",sectionColumn:"ProjectsCenter_sectionColumn__DrFWG",section:"ProjectsCenter_section__0tP__",sectionHeader:"ProjectsCenter_sectionHeader__zFr5Q",title:"ProjectsCenter_title__k_uOD",cardsGrid:"ProjectsCenter_cardsGrid__eVs_f",card:"ProjectsCenter_card__nj4Z3",imageWrapper:"ProjectsCenter_imageWrapper__JPJZz",cardImage:"ProjectsCenter_cardImage__lu0cd",cardOverlay:"ProjectsCenter_cardOverlay__2rwQg",cardTitle:"ProjectsCenter_cardTitle__e7vce",navigation:"ProjectsCenter_navigation__Bp0XG",navText:"ProjectsCenter_navText__kXTL5",pageNumber:"ProjectsCenter_pageNumber__e3gLR",active:"ProjectsCenter_active__s_dOH",loadingMessage:"ProjectsCenter_loadingMessage__Hk_qs",noDataMessage:"ProjectsCenter_noDataMessage__g8wCB",pagination:"ProjectsCenter_pagination__zqCiI",paginationButton:"ProjectsCenter_paginationButton__JfwB2"}},1164:(e,a,t)=>{"use strict";t.d(a,{A:()=>_});var i=t(5155),s=t(2115),n=t(6766),c=t(5695),r=t(4242),o=t.n(r),l=t(7185),d=t(3268);let _=e=>{let{projectId:a,centerId:t,sectorId:r}=e,_=(0,c.useRouter)(),[g,m]=(0,s.useState)([]),[h,p]=(0,s.useState)(!0),[u,j]=(0,s.useState)(1),[v,x]=(0,s.useState)(new Set),N=(0,l.B)(),{lang:C}=(0,d.o)();(0,s.useEffect)(()=>{(async()=>{p(!0);try{let e=new URLSearchParams({search:"",project_id:a||"",center_id:t||"",sector_id:r||"",tag_id:""}),i="https://app.mosaic-hrd.org/api/activities/paginated?".concat(e.toString()),s=await fetch(i,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Accept-Language":C}});if(!s.ok)throw Error("Failed to fetch via proxy: ".concat(s.statusText));let n=await s.json();console.log("Activities API Response:",n);let c=[];n&&n.data&&Array.isArray(n.data.activities)?(c=n.data.activities).sort((e,a)=>new Date(a.publishing_date).getTime()-new Date(e.publishing_date).getTime()):(console.log("No activities found in response"),console.log("Available keys:",(null==n?void 0:n.data)?Object.keys(n.data):"No data object")),m(c)}catch(e){console.error("Failed to fetch activities:",e),m([])}finally{p(!1)}})()},[C,a,t,r]);let P=Math.ceil(g.length/4),f=e=>{j(e)},y=4*u,A=g.slice(y-4,y),w=e=>{_.push("/ActivitiesDetails?id=".concat(e))},b=e=>{x(a=>new Set(a).add(e))},S=()=>"/Activities.jpg";return h?(0,i.jsxs)("div",{className:o().container,children:[(0,i.jsx)("h1",{className:o().title,children:N("activities")}),(0,i.jsx)("div",{className:o().loadingMessage,children:"ar"===C?"جاري التحميل...":"Loading..."})]}):0===g.length?(0,i.jsxs)("div",{className:o().container,children:[(0,i.jsx)("h1",{className:o().title,children:N("activities")}),(0,i.jsx)("div",{className:o().noDataMessage,children:"ar"===C?"لا توجد أنشطة متاحة":"No activities available"})]}):(0,i.jsxs)("div",{className:o().container,children:[(0,i.jsx)("h1",{className:o().title,children:N("activities")}),(0,i.jsx)("div",{className:o().activitiesGrid,children:A.map(e=>(0,i.jsxs)("div",{className:o().activityCard,onClick:()=>w(e.id),children:[(0,i.jsx)("div",{className:o().imageWrapper,children:(0,i.jsx)(n.default,{src:v.has(e.id)?S():e.image,alt:e.name,width:500,height:400,className:o().image,onError:()=>b(e.id),priority:2>A.indexOf(e),sizes:"(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 25vw"})}),(0,i.jsx)("h3",{className:o().activityTitle,children:e.name})]},e.id))}),P>1&&(0,i.jsxs)("div",{className:o().pagination,children:[(0,i.jsx)("button",{onClick:()=>f(u-1),disabled:1===u,className:o().paginationButton,children:"ar"===C?"السابق":"Previous"}),[...Array(P)].map((e,a)=>{let t=a+1,s=u===t;return 1===t||t===P||1>=Math.abs(t-u)?(0,i.jsx)("button",{onClick:()=>f(t),className:"".concat(o().paginationButton," ").concat(s?o().active:""),children:t},t):2===t&&u>3?(0,i.jsx)("span",{className:o().paginationEllipsis,children:"..."},"ellipsis-start"):t===P-1&&u<P-2?(0,i.jsx)("span",{className:o().paginationEllipsis,children:"..."},"ellipsis-end"):null}),(0,i.jsx)("button",{onClick:()=>f(u+1),disabled:u===P,className:o().paginationButton,children:"ar"===C?"التالي":"Next"})]})]})}},1783:(e,a,t)=>{Promise.resolve().then(t.bind(t,9194))},4242:e=>{e.exports={container:"Activities_container__9n1Tp",title:"Activities_title__4SRTl",activitiesGrid:"Activities_activitiesGrid__w15Oy",activityCard:"Activities_activityCard__mx34q",imageWrapper:"Activities_imageWrapper__mNk2_",image:"Activities_image__NBv23",activityTitle:"Activities_activityTitle__T72ox",pagination:"Activities_pagination__95Q1e",paginationButton:"Activities_paginationButton__Ty_sU",active:"Activities_active__1i43_",loadingMessage:"Activities_loadingMessage__Q6Vkc",noDataMessage:"Activities_noDataMessage__Jltvl",paginationEllipsis:"Activities_paginationEllipsis__EfLKu"}},5089:(e,a,t)=>{"use strict";t.d(a,{default:()=>c});var i=t(5155),s=t(8453),n=t.n(s);function c(e){let{text:a="جاري التحميل",subtext:t="يرجى الانتظار قليلاً",size:s="medium",className:c=""}=e;return(0,i.jsxs)("div",{className:"".concat(n().loadingContainer," ").concat(n()[s]," ").concat(c),children:[(0,i.jsx)("div",{className:n().loadingSpinner}),(0,i.jsxs)("div",{className:n().loadingText,children:[a,(0,i.jsx)("span",{className:n().loadingDots})]}),t&&(0,i.jsx)("div",{className:n().loadingSubtext,children:t})]})}},5695:(e,a,t)=>{"use strict";var i=t(8999);t.o(i,"usePathname")&&t.d(a,{usePathname:function(){return i.usePathname}}),t.o(i,"useRouter")&&t.d(a,{useRouter:function(){return i.useRouter}}),t.o(i,"useSearchParams")&&t.d(a,{useSearchParams:function(){return i.useSearchParams}})},8453:e=>{e.exports={loadingContainer:"Loading_loadingContainer__xYplO",loadingSpinner:"Loading_loadingSpinner__M270_",loadingPulse:"Loading_loadingPulse__Qaw_K",loadingText:"Loading_loadingText___vDh_",loadingSubtext:"Loading_loadingSubtext__wQMxs",loadingDots:"Loading_loadingDots__WkQtU",small:"Loading_small__OUu1F",medium:"Loading_medium__Pt9vT",large:"Loading_large__Xyjja"}},9194:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>v});var i=t(5155),s=t(2115),n=t(5695),c=t(3289),r=t(1164),o=t(646),l=t.n(o),d=t(6766),_=t(6874),g=t.n(_);let m=e=>{let{title:a,items:t,loading:s,currentPage:n=1,totalPages:c=1,onPageChange:r}=e;if(s)return(0,i.jsxs)("div",{className:l().section,children:[(0,i.jsx)("div",{className:l().sectionHeader,children:(0,i.jsx)("h2",{className:l().title,children:a})}),(0,i.jsx)("div",{className:l().cardsGrid,children:(0,i.jsx)("div",{className:l().loadingMessage,children:"جاري التحميل..."})})]});if(0===t.length)return(0,i.jsxs)("div",{className:l().section,children:[(0,i.jsx)("div",{className:l().sectionHeader,children:(0,i.jsx)("h2",{className:l().title,children:a})}),(0,i.jsx)("div",{className:l().cardsGrid,children:(0,i.jsx)("div",{className:l().noDataMessage,children:"لا توجد بيانات متاحة"})})]});let o=e=>a.toLowerCase().includes("centers")||a.toLowerCase().includes("المراكز")?"/About-Us?id=".concat(e.id):"/Education?id=".concat(e.id);return(0,i.jsxs)("div",{className:l().section,children:[(0,i.jsx)("div",{className:l().sectionHeader,children:(0,i.jsx)("h2",{className:l().title,children:a})}),(0,i.jsx)("div",{className:l().cardsGrid,children:t.map(e=>(0,i.jsx)(g(),{href:o(e),children:(0,i.jsxs)("div",{className:l().card,children:[(0,i.jsx)("div",{className:l().imageWrapper,children:(0,i.jsx)(d.default,{src:e.image,alt:e.name,fill:!0,className:l().cardImage,onError:e=>{e.target.src="/Slider.jpg"}})}),(0,i.jsx)("div",{className:l().cardOverlay,children:(0,i.jsx)("h3",{className:l().cardTitle,children:e.name})})]})},e.id))}),c>1&&r&&(0,i.jsxs)("div",{className:l().pagination,children:[(0,i.jsx)("button",{onClick:()=>r(n-1),disabled:1===n,className:l().paginationButton,children:"Previous"}),[...Array(c)].map((e,a)=>(0,i.jsx)("button",{onClick:()=>r(a+1),className:"".concat(l().paginationButton," ").concat(n===a+1?l().active:""),children:a+1},a+1)),(0,i.jsx)("button",{onClick:()=>r(n+1),disabled:n===c,className:l().paginationButton,children:"Next"})]})]})};var h=t(7185),p=t(3268);let u=e=>{let{centerId:a}=e,[t,n]=(0,s.useState)([]),[c,r]=(0,s.useState)([]),[o,d]=(0,s.useState)(!0),[_,g]=(0,s.useState)(!0),[u,j]=(0,s.useState)(1),[v,x]=(0,s.useState)(1),N=(0,h.B)(),{lang:C}=(0,p.o)();(0,s.useEffect)(()=>{let e=async()=>{g(!0);try{let e=await fetch("".concat("https://app.mosaic-hrd.org/api","/centers"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Accept-Language":C}});if(!e.ok)throw Error("Failed to fetch centers: ".concat(e.statusText));let a=await e.json(),t=[];a&&a.data&&Array.isArray(a.data.centers)&&(t=a.data.centers.map(e=>({id:e.id,name:e.name,image:e.image}))),r(t)}catch(e){console.error("Failed to fetch centers:",e),r([])}finally{g(!1)}};(async()=>{d(!0);try{let e=new URLSearchParams({search:"",center_id:a||"",tag_id:""}),t="https://app.mosaic-hrd.org/api/projects/paginated?".concat(e.toString()),i=await fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Accept-Language":C}});if(!i.ok)throw Error("Failed to fetch projects: ".concat(i.statusText));let s=await i.json();console.log("Projects API Response:",s);let c=[];s&&s.data&&Array.isArray(s.data.projects)?c=s.data.projects.map(e=>({id:e.id,name:e.name,image:e.image,center_id:e.center_id})):(console.log("No projects found in response"),console.log("Available keys:",(null==s?void 0:s.data)?Object.keys(s.data):"No data object")),n(c)}catch(e){console.error("Failed to fetch projects:",e),n([])}finally{d(!1)}})(),e()},[C,a]);let P=Math.ceil(t.length/4),f=4*u,y=t.slice(f-4,f),A=Math.ceil(c.length/2),w=2*v,b=c.slice(w-2,w);return(0,i.jsx)("div",{className:l().container,children:(0,i.jsxs)("div",{className:l().sectionsWrapper,children:[(0,i.jsx)("div",{className:l().sectionColumn,children:(0,i.jsx)(m,{title:N("centers"),items:b,loading:_,currentPage:v,totalPages:A,onPageChange:e=>{x(e)}})}),(0,i.jsx)("div",{className:l().sectionColumn,children:(0,i.jsx)(m,{title:N("projects"),items:y,loading:o,currentPage:u,totalPages:P,onPageChange:e=>{j(e)}})})]})})};var j=t(5089);function v(){let e=(0,n.useSearchParams)(),a=(null==e?void 0:e.get("id"))||null;return(0,i.jsx)("main",{children:(0,i.jsxs)(s.Suspense,{fallback:(0,i.jsx)(j.default,{}),children:[(0,i.jsx)(c.default,{centerId:a}),(0,i.jsx)(r.A,{centerId:a}),(0,i.jsx)(u,{centerId:a})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[593,6711,6766,6874,7185,3548,8441,1684,7358],()=>a(1783)),_N_E=e.O()}]);
