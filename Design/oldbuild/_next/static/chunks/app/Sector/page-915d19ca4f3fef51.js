(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2757],{497:(e,t,a)=>{Promise.resolve().then(a.bind(a,4086))},4086:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>N});var s=a(5155),n=a(5695),i=a(2115),r=a(6766),c=a(4910),o=a.n(c),l=a(5089),d=a(7185);let h=e=>{let{sector:t,loading:a,error:n,onRetry:i}=e,c=(0,d.B)();if(a)return(0,s.jsxs)("div",{className:o().container,children:[(0,s.jsx)("div",{className:o().banner,children:(0,s.jsxs)("div",{className:o().bannerContent,children:[(0,s.jsx)(r.default,{src:"/logo.png",alt:"Health Sector Logo",width:75,height:75,className:o().logo}),(0,s.jsx)("h1",{className:o().bannerTitle,children:"Sector Details"})]})}),(0,s.jsx)(l.default,{text:"Loading sector details...",subtext:"Please wait a moment",size:"medium"})]});if(n)return(0,s.jsxs)("div",{className:o().container,children:[(0,s.jsx)("div",{className:o().banner,children:(0,s.jsxs)("div",{className:o().bannerContent,children:[(0,s.jsx)(r.default,{src:"/logo.png",alt:"Health Sector Logo",width:75,height:75,className:o().logo}),(0,s.jsx)("h1",{className:o().bannerTitle,children:"Sector Details"})]})}),(0,s.jsxs)("div",{style:{textAlign:"center",padding:"2rem",color:"red"},children:[(0,s.jsxs)("div",{children:["Error: ",n]}),(0,s.jsx)("button",{onClick:i,style:{marginTop:"1rem",padding:"0.5rem 1rem",background:"#4DA2DF",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Retry"})]})]});if(!t)return(0,s.jsxs)("div",{className:o().container,children:[(0,s.jsx)("div",{className:o().banner,children:(0,s.jsx)("div",{className:o().bannerContent,children:(0,s.jsx)("h1",{className:o().bannerTitle,children:c("sectorNotFound")})})}),(0,s.jsx)("div",{style:{textAlign:"center",padding:"2rem"},children:(0,s.jsx)("div",{children:c("sectorNotFoundMessage")})})]});let h=t.description.replace(/<img[^>]*>/gi,"").replace(/<hr[^>]*>/gi,"");return(0,s.jsxs)("div",{className:o().container,children:[(0,s.jsx)("div",{className:o().banner,children:(0,s.jsx)("div",{className:o().bannerContent,children:(0,s.jsx)("h1",{className:o().bannerTitle,children:t.name})})}),(0,s.jsxs)("div",{className:o().mainContent,children:[(0,s.jsx)("div",{className:o().heroSection,children:(0,s.jsx)(r.default,{src:t.image,alt:t.name,width:1200,height:200,className:o().heroImage,priority:!0})}),(0,s.jsx)("div",{className:o().contentSection,children:(0,s.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,s.jsx)("h2",{className:o().sectionTitle,children:t.name}),(0,s.jsx)("div",{className:o().description,dangerouslySetInnerHTML:{__html:h}})]})})]})]})};var m=a(7860),j=a.n(m);let _=e=>{let{sectorId:t}=e,[a,n]=(0,i.useState)([]),[c,o]=(0,i.useState)(!0),[l,d]=(0,i.useState)(1);(0,i.useEffect)(()=>{(async()=>{o(!0);try{let e=new URLSearchParams({search:"",sector_id:t||"",center_id:"",tag_id:""}),a="".concat("https://app.mosaic-hrd.org/api","/projects/paginated?").concat(e.toString());console.log("Fetching from URL:",a);let s=await fetch(a,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(console.log("Response status:",s.status),!s.ok)throw Error("Failed to fetch: ".concat(s.statusText));let i=await s.json();console.log("Projects API Response:",i),i&&i.data&&Array.isArray(i.data.projects)?(console.log("Processed projects data:",i.data.projects),n(i.data.projects)):(console.log("No projects found in response"),n([]))}catch(e){console.error("Failed to fetch projects:",e),n([])}finally{o(!1)}})()},[t]);let h=Math.ceil(a.length/4),m=e=>{d(e)},_=4*l,x=a.slice(_-4,_);return c?(0,s.jsxs)("div",{className:j().container,children:[(0,s.jsx)("h1",{className:j().title,children:"Projects"}),(0,s.jsx)("div",{className:j().loadingMessage,children:"جاري التحميل..."})]}):0===a.length?(0,s.jsxs)("div",{className:j().container,children:[(0,s.jsx)("h1",{className:j().title,children:"Projects"}),(0,s.jsx)("div",{className:j().noDataMessage,children:"لا توجد مشاريع متاحة"})]}):(0,s.jsxs)("div",{className:j().container,children:[(0,s.jsx)("h1",{className:j().title,children:"Projects"}),(0,s.jsx)("div",{className:j().activitiesGrid,children:x.map(e=>(0,s.jsxs)("div",{className:j().activityCard,children:[(0,s.jsx)("div",{className:j().imageWrapper,children:(0,s.jsx)(r.default,{src:e.image,alt:e.name,width:300,height:200,className:j().image})}),(0,s.jsx)("h3",{className:j().activityTitle,children:e.name})]},e.id))}),(0,s.jsxs)("div",{className:j().pagination,children:[(0,s.jsx)("button",{onClick:()=>m(l-1),disabled:1===l,className:j().paginationButton,children:"Previous"}),[...Array(h)].map((e,t)=>(0,s.jsx)("button",{onClick:()=>m(t+1),className:"".concat(j().paginationButton," ").concat(l===t+1?j().active:""),children:t+1},t+1)),(0,s.jsx)("button",{onClick:()=>m(l+1),disabled:l===h,className:j().paginationButton,children:"Next"})]})]})};var x=a(9100),p=a(4428),g=a(3268),u=a(1164);function v(){let e=(0,n.useSearchParams)().get("id"),{lang:t}=(0,g.o)(),[a,r]=(0,i.useState)(null),[c,o]=(0,i.useState)(!0),[l,d]=(0,i.useState)(null),m=(0,i.useCallback)(async()=>{if(!e){o(!1),d("No sector ID provided.");return}o(!0),d(null);try{let a="https://app.mosaic-hrd.org/api/sectors/".concat(e),s=await fetch(a,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Accept-Language":t}});if(!s.ok)throw Error("Failed to fetch: ".concat(s.statusText));let n=await s.json();if(n.data)r(n.data);else throw Error("Invalid data format from API.")}catch(e){console.error("Failed to fetch sector:",e),e instanceof Error?d(e.message):d("An unknown error occurred.")}finally{o(!1)}},[e,t]);return(0,i.useEffect)(()=>{m()},[m]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h,{sector:a,loading:c,error:l,onRetry:m}),a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_,{sectorId:e}),(0,s.jsx)(x.A,{sectorId:e}),(0,s.jsx)(p.A,{sectorId:e}),(0,s.jsx)(u.A,{sectorId:e})]})]})}function N(){return(0,s.jsx)(i.Suspense,{fallback:(0,s.jsx)(l.default,{}),children:(0,s.jsx)(v,{})})}},4910:e=>{e.exports={container:"HealthSector_container__uqWBd",banner:"HealthSector_banner__4ytKF",bannerContent:"HealthSector_bannerContent__RMGAP",logo:"HealthSector_logo__Bo0t7",bannerTitle:"HealthSector_bannerTitle__am2LY",mainContent:"HealthSector_mainContent__lT9of",heroSection:"HealthSector_heroSection__i7J9c",heroImage:"HealthSector_heroImage__SSbqa",sectionTitle:"HealthSector_sectionTitle__CGKuC",description:"HealthSector_description__EbnWT",featureList:"HealthSector_featureList__LFS0Q",additionalInfo:"HealthSector_additionalInfo__eqTI6",contentSection:"HealthSector_contentSection__OLGX_"}},7860:e=>{e.exports={container:"Projects_container__TG7WZ",title:"Projects_title__tM2WI",activitiesGrid:"Projects_activitiesGrid__vRnIJ",activityCard:"Projects_activityCard__Lp5GT",imageWrapper:"Projects_imageWrapper__Iect6",image:"Projects_image__K06jj",activityTitle:"Projects_activityTitle__Pos1J",pagination:"Projects_pagination__Sbkb8",paginationButton:"Projects_paginationButton__a6n0s",active:"Projects_active__ESdv4"}}},e=>{var t=t=>e(e.s=t);e.O(0,[5897,593,6766,7185,1192,8441,1684,7358],()=>t(497)),_N_E=e.O()}]);
