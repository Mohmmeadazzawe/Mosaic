(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7042],{1420:(e,t,a)=>{Promise.resolve().then(a.bind(a,2099))},2099:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(5155),n=a(2115),r=a(6766),i=a(8029),l=a.n(i),o=a(9911),c=a(7185),d=a(3268),u=a(5695),g=a(5089),p=a(6874),h=a.n(p);let _=()=>{let e=(0,u.useSearchParams)(),t=null==e?void 0:e.get("tag_id"),a=null==e?void 0:e.get("tag_name"),[i,p]=(0,n.useState)([]),[_,m]=(0,n.useState)(!0),[f,v]=(0,n.useState)(null),[j,x]=(0,n.useState)(1),[b]=(0,n.useState)(10),{lang:T}=(0,d.o)(),y=(0,c.B)(),N=(0,u.useRouter)(),w=[{href:"/",label:y("home")},{href:"/Projects",label:y("projects")},{href:"/News",label:y("news")},{href:"/Activities",label:y("activities")},{href:"/Statistics",label:y("statistics")},{href:"/Reports",label:y("reports")},{href:"/about",label:y("about")},{href:"/Joinus",label:y("joinus")},{href:"/contact",label:y("contact")}],C=Math.ceil(i.length/b),F=(j-1)*b,P=F+b,S=i.slice(F,P);(0,n.useEffect)(()=>{x(1)},[i.length]),(0,n.useEffect)(()=>{(async()=>{if(!t){m(!1),v("لم يتم تحديد معرف الوسم");return}m(!0),v(null);try{let e=[],a=!1,s=[{url:"activities/paginated",type:"activities"},{url:"projects/paginated",type:"projects"},{url:"success-stories/paginated",type:"news"},{url:"statistics/paginated",type:"statistics"}].map(async e=>{try{let a=new URLSearchParams({per_page:"100",tag_id:t.toString()}),s="".concat("https://app.mosaic-hrd.org/api","/").concat(e.url,"?").concat(a);console.log("Fetching from ".concat(e.type,":"),s);let n=new AbortController,r=setTimeout(()=>n.abort(),1e4),i=await fetch(s,{headers:{Accept:"application/json","Content-Type":"application/json","Accept-Language":T||"ar"},signal:n.signal});if(clearTimeout(r),!i.ok)return console.error("Failed to fetch from ".concat(e.type,":"),i.statusText),[];let l=await i.json(),o=[];if(null==l?void 0:l.data)switch(e.type){case"activities":o=(l.data.activities||[]).filter(e=>{var a;return null==(a=e.tags)?void 0:a.some(e=>e.id.toString()===t)}).map(t=>({...t,contentType:e.type}));break;case"projects":o=(l.data.projects||[]).filter(e=>{var a;return null==(a=e.tags)?void 0:a.some(e=>e.id.toString()===t)}).map(t=>({...t,contentType:e.type}));break;case"news":o=(l.data.success_stories||l.data.centers||[]).filter(e=>{var a;return null==(a=e.tags)?void 0:a.some(e=>e.id.toString()===t)}).map(t=>({...t,contentType:e.type}));break;case"statistics":o=(l.data.statistics||[]).filter(e=>{var a;return null==(a=e.tags)?void 0:a.some(e=>e.id.toString()===t)}).map(t=>({...t,contentType:e.type}))}return o}catch(t){return console.error("Error fetching ".concat(e.type,":"),t),[]}});(await Promise.allSettled(s)).forEach((t,s)=>{"fulfilled"===t.status?e=[...e,...t.value]:(console.error("Request ".concat(s," failed:"),t.reason),a=!0)}),console.log("Total items found:",e.length),p(e),a&&0===e.length&&v("حدث خطأ في الخادم. يرجى المحاولة مرة أخرى."),m(!1)}catch(e){console.error("Error in fetchItems:",e),v("حدث خطأ أثناء جلب البيانات. يرجى المحاولة مرة أخرى."),m(!1)}})()},[t,T]);let O=(e,t)=>{N.push("/TagsFillter?tag_id=".concat(e,"&tag_name=").concat(t))},k=e=>{x(e),window.scrollTo({top:0,behavior:"smooth"})};return _?(0,s.jsx)("div",{className:l().container,children:(0,s.jsx)(g.default,{text:"جاري التحميل..."})}):f?(0,s.jsx)("div",{className:l().container,children:(0,s.jsxs)("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:[(0,s.jsx)("h3",{children:"خطأ"}),(0,s.jsx)("p",{children:f}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),style:{marginTop:"1rem",padding:"0.5rem 1rem",background:"#4DA2DF",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"إعادة المحاولة"})]})}):(0,s.jsxs)("div",{className:l().container,children:[(0,s.jsx)("h1",{className:l().mainTitle,children:a?"عرض النتائج: ".concat(a):"عرض المزيد"}),(0,s.jsxs)("div",{className:l().content,children:[(0,s.jsx)("div",{className:l().mainContent,children:0===i.length?(0,s.jsxs)("div",{className:l().noResults,children:[(0,s.jsx)("h3",{children:"لا توجد نتائج"}),(0,s.jsx)("p",{children:"لم يتم العثور على محتوى لهذا الوسم"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:l().resultsInfo,children:(0,s.jsxs)("p",{children:["عرض ",F+1," إلى ",Math.min(P,i.length)," من ",i.length," نتيجة"]})}),S.map(e=>(0,s.jsxs)(h(),{href:"/".concat("news"===e.contentType?"NewsDetails":"activities"===e.contentType?"ActivitiesDetails":"statistics"===e.contentType?"statistics-details":"Education","?id=").concat(e.id),className:l().blogPost,children:[(0,s.jsx)("div",{className:l().imageContainer,children:(0,s.jsx)(r.default,{src:e.image,alt:e.name,width:200,height:150,className:l().postImage,onError:e=>{e.target.src="/image.jpg"}})}),(0,s.jsxs)("div",{className:l().postContent,children:[(0,s.jsx)("h3",{className:l().postTitle,children:e.name}),(0,s.jsxs)("div",{className:l().postMeta,children:[(0,s.jsxs)("div",{className:l().dateContainer,children:[(0,s.jsx)(o.bfZ,{className:l().icon}),(0,s.jsxs)("span",{children:["تاريخ النشر: ",e.publishing_date]})]}),(0,s.jsxs)("div",{className:l().tagsContainer,children:[(0,s.jsx)(o.BuZ,{className:l().icon}),(0,s.jsx)("span",{children:"العلامات: "}),e.tags.map(e=>(0,s.jsx)("span",{className:l().tag,onClick:t=>{t.preventDefault(),t.stopPropagation(),O(e.id,e.name)},children:e.name},e.id))]})]})]})]},e.id)),C>1&&(0,s.jsxs)("div",{className:l().pagination,children:[(0,s.jsxs)("button",{onClick:()=>{j>1&&k(j-1)},disabled:1===j,className:"".concat(l().paginationButton," ").concat(l().prevButton),children:[(0,s.jsx)(o._Jj,{}),"السابق"]}),(0,s.jsx)("div",{className:l().pageNumbers,children:(()=>{let e=[];if(C<=5)for(let t=1;t<=C;t++)e.push(t);else if(j<=3){for(let t=1;t<=4;t++)e.push(t);e.push("..."),e.push(C)}else if(j>=C-2){e.push(1),e.push("...");for(let t=C-3;t<=C;t++)e.push(t)}else{e.push(1),e.push("...");for(let t=j-1;t<=j+1;t++)e.push(t);e.push("..."),e.push(C)}return e})().map((e,t)=>(0,s.jsx)("button",{onClick:()=>"number"==typeof e&&k(e),className:"".concat(l().pageButton," ").concat(e===j?l().activePage:""," ").concat("..."===e?l().ellipsis:""),disabled:"..."===e,children:e},t))}),(0,s.jsxs)("button",{onClick:()=>{j<C&&k(j+1)},disabled:j===C,className:"".concat(l().paginationButton," ").concat(l().nextButton),children:["التالي",(0,s.jsx)(o.X6T,{})]})]})]})}),(0,s.jsxs)("aside",{className:l().sidebar,children:[(0,s.jsx)("div",{className:l().searchBox,children:(0,s.jsxs)("div",{className:l().searchContainer,children:[(0,s.jsx)("input",{type:"search",placeholder:"بحث...",className:l().searchInput}),(0,s.jsx)(o.KSO,{className:l().searchIcon})]})}),(0,s.jsxs)("div",{className:l().sections,children:[(0,s.jsx)("h2",{children:"الأقسام"}),w.map((e,t)=>(0,s.jsxs)("a",{href:e.href,className:l().quickLink,children:[(0,s.jsx)("span",{children:e.label}),(0,s.jsx)("span",{className:l().arrow,children:"›"})]},t))]}),(0,s.jsxs)("div",{className:l().tagsSection,children:[(0,s.jsx)("h2",{children:"العلامات"}),(0,s.jsx)("div",{className:l().tagsList})]})]})]})]})};function m(){return(0,s.jsx)("main",{children:(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)(g.default,{}),children:(0,s.jsx)(_,{})})})}},4436:(e,t,a)=>{"use strict";a.d(t,{k5:()=>d});var s=a(2115),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},r=s.createContext&&s.createContext(n),i=["attr","size","title"];function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach(function(t){var s,n,r;s=e,n=t,r=a[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function d(e){return t=>s.createElement(u,l({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,a)=>s.createElement(t.tag,c({key:a},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var a,{attr:n,size:r,title:o}=e,d=function(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,i),u=r||t.size||"1em";return t.className&&(a=t.className),e.className&&(a=(a?a+" ":"")+e.className),s.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,d,{className:a,style:c(c({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&s.createElement("title",null,o),e.children)};return void 0!==r?s.createElement(r.Consumer,null,e=>t(e)):t(n)}},5089:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var s=a(5155),n=a(8453),r=a.n(n);function i(e){let{text:t="جاري التحميل",subtext:a="يرجى الانتظار قليلاً",size:n="medium",className:i=""}=e;return(0,s.jsxs)("div",{className:"".concat(r().loadingContainer," ").concat(r()[n]," ").concat(i),children:[(0,s.jsx)("div",{className:r().loadingSpinner}),(0,s.jsxs)("div",{className:r().loadingText,children:[t,(0,s.jsx)("span",{className:r().loadingDots})]}),a&&(0,s.jsx)("div",{className:r().loadingSubtext,children:a})]})}},5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},8029:e=>{e.exports={container:"TagsFillter_container__uP948",mainTitle:"TagsFillter_mainTitle__PoZIg",content:"TagsFillter_content__TtXNB",mainContent:"TagsFillter_mainContent__3q4Cd",resultsInfo:"TagsFillter_resultsInfo__C4i58",blogPost:"TagsFillter_blogPost__yBTdZ",imageContainer:"TagsFillter_imageContainer__hTDod",postImage:"TagsFillter_postImage__UalZ7",postContent:"TagsFillter_postContent__yXK9i",postTitle:"TagsFillter_postTitle__J1_T9",postDescription:"TagsFillter_postDescription__3ovkv",postMeta:"TagsFillter_postMeta__QRRLY",dateContainer:"TagsFillter_dateContainer__ISv1U",tagsContainer:"TagsFillter_tagsContainer__4Ywgt",icon:"TagsFillter_icon__vQT30",tag:"TagsFillter_tag__9mDlP",pagination:"TagsFillter_pagination__wsK8b",paginationButton:"TagsFillter_paginationButton__EWip2",prevButton:"TagsFillter_prevButton__4rLgX",nextButton:"TagsFillter_nextButton__yvjnv",pageNumbers:"TagsFillter_pageNumbers__SCMhh",pageButton:"TagsFillter_pageButton__3S5Is",activePage:"TagsFillter_activePage__ugBq2",ellipsis:"TagsFillter_ellipsis__6mIfo",sidebar:"TagsFillter_sidebar__jnCdv",searchBox:"TagsFillter_searchBox__oUWIA",searchContainer:"TagsFillter_searchContainer__WsAqW",searchInput:"TagsFillter_searchInput__zGApd",searchIcon:"TagsFillter_searchIcon__GECPN",sections:"TagsFillter_sections__0Ugsj",quickLink:"TagsFillter_quickLink__0TWUy",arrow:"TagsFillter_arrow___smtH",tagsSection:"TagsFillter_tagsSection__b59L2",tagsList:"TagsFillter_tagsList__QIpqb",tagChip:"TagsFillter_tagChip__JA267",noResults:"TagsFillter_noResults__QYJid"}},8453:e=>{e.exports={loadingContainer:"Loading_loadingContainer__xYplO",loadingSpinner:"Loading_loadingSpinner__M270_",loadingPulse:"Loading_loadingPulse__Qaw_K",loadingText:"Loading_loadingText___vDh_",loadingSubtext:"Loading_loadingSubtext__wQMxs",loadingDots:"Loading_loadingDots__WkQtU",small:"Loading_small__OUu1F",medium:"Loading_medium__Pt9vT",large:"Loading_large__Xyjja"}}},e=>{var t=t=>e(e.s=t);e.O(0,[978,593,6711,6766,6874,7185,8441,1684,7358],()=>t(1420)),_N_E=e.O()}]);
