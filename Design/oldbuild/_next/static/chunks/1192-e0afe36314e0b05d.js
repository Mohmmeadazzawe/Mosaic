(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1192],{1164:(e,a,t)=>{"use strict";t.d(a,{A:()=>_});var i=t(5155),s=t(2115),n=t(6766),c=t(5695),l=t(4242),o=t.n(l),r=t(7185),d=t(3268);let _=e=>{let{projectId:a,centerId:t,sectorId:l}=e,_=(0,c.useRouter)(),[p,g]=(0,s.useState)([]),[u,h]=(0,s.useState)(!0),[m,v]=(0,s.useState)(1),[x,N]=(0,s.useState)(new Set),j=(0,r.B)(),{lang:y}=(0,d.o)();(0,s.useEffect)(()=>{(async()=>{h(!0);try{let e=new URLSearchParams({search:"",project_id:a||"",center_id:t||"",sector_id:l||"",tag_id:""}),i="https://app.mosaic-hrd.org/api/activities/paginated?".concat(e.toString()),s=await fetch(i,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Accept-Language":y}});if(!s.ok)throw Error("Failed to fetch via proxy: ".concat(s.statusText));let n=await s.json();console.log("Activities API Response:",n);let c=[];n&&n.data&&Array.isArray(n.data.activities)?(c=n.data.activities).sort((e,a)=>new Date(a.publishing_date).getTime()-new Date(e.publishing_date).getTime()):(console.log("No activities found in response"),console.log("Available keys:",(null==n?void 0:n.data)?Object.keys(n.data):"No data object")),g(c)}catch(e){console.error("Failed to fetch activities:",e),g([])}finally{h(!1)}})()},[y,a,t,l]);let S=Math.ceil(p.length/4),f=e=>{v(e)},A=4*m,w=p.slice(A-4,A),C=e=>{_.push("/ActivitiesDetails?id=".concat(e))},b=e=>{N(a=>new Set(a).add(e))},T=()=>"/Activities.jpg";return u?(0,i.jsxs)("div",{className:o().container,children:[(0,i.jsx)("h1",{className:o().title,children:j("activities")}),(0,i.jsx)("div",{className:o().loadingMessage,children:"ar"===y?"جاري التحميل...":"Loading..."})]}):0===p.length?(0,i.jsxs)("div",{className:o().container,children:[(0,i.jsx)("h1",{className:o().title,children:j("activities")}),(0,i.jsx)("div",{className:o().noDataMessage,children:"ar"===y?"لا توجد أنشطة متاحة":"No activities available"})]}):(0,i.jsxs)("div",{className:o().container,children:[(0,i.jsx)("h1",{className:o().title,children:j("activities")}),(0,i.jsx)("div",{className:o().activitiesGrid,children:w.map(e=>(0,i.jsxs)("div",{className:o().activityCard,onClick:()=>C(e.id),children:[(0,i.jsx)("div",{className:o().imageWrapper,children:(0,i.jsx)(n.default,{src:x.has(e.id)?T():e.image,alt:e.name,width:500,height:400,className:o().image,onError:()=>b(e.id),priority:2>w.indexOf(e),sizes:"(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 25vw"})}),(0,i.jsx)("h3",{className:o().activityTitle,children:e.name})]},e.id))}),S>1&&(0,i.jsxs)("div",{className:o().pagination,children:[(0,i.jsx)("button",{onClick:()=>f(m-1),disabled:1===m,className:o().paginationButton,children:"ar"===y?"السابق":"Previous"}),[...Array(S)].map((e,a)=>{let t=a+1,s=m===t;return 1===t||t===S||1>=Math.abs(t-m)?(0,i.jsx)("button",{onClick:()=>f(t),className:"".concat(o().paginationButton," ").concat(s?o().active:""),children:t},t):2===t&&m>3?(0,i.jsx)("span",{className:o().paginationEllipsis,children:"..."},"ellipsis-start"):t===S-1&&m<S-2?(0,i.jsx)("span",{className:o().paginationEllipsis,children:"..."},"ellipsis-end"):null}),(0,i.jsx)("button",{onClick:()=>f(m+1),disabled:m===S,className:o().paginationButton,children:"ar"===y?"التالي":"Next"})]})]})}},2242:e=>{e.exports={container:"Success_Stories_container__TVqSp",title:"Success_Stories_title__tF__N",activitiesGrid:"Success_Stories_activitiesGrid__sBSkN",activityCard:"Success_Stories_activityCard__tyMC9",imageWrapper:"Success_Stories_imageWrapper__I3GwJ",image:"Success_Stories_image__15NC6",activityTitle:"Success_Stories_activityTitle__L6Pp3",pagination:"Success_Stories_pagination___36jh",paginationButton:"Success_Stories_paginationButton__wLRuC",active:"Success_Stories_active__yyh8q",paginationEllipsis:"Success_Stories_paginationEllipsis__ZDp_u"}},4242:e=>{e.exports={container:"Activities_container__9n1Tp",title:"Activities_title__4SRTl",activitiesGrid:"Activities_activitiesGrid__w15Oy",activityCard:"Activities_activityCard__mx34q",imageWrapper:"Activities_imageWrapper__mNk2_",image:"Activities_image__NBv23",activityTitle:"Activities_activityTitle__T72ox",pagination:"Activities_pagination__95Q1e",paginationButton:"Activities_paginationButton__Ty_sU",active:"Activities_active__1i43_",loadingMessage:"Activities_loadingMessage__Q6Vkc",noDataMessage:"Activities_noDataMessage__Jltvl",paginationEllipsis:"Activities_paginationEllipsis__EfLKu"}},4428:(e,a,t)=>{"use strict";t.d(a,{A:()=>_});var i=t(5155),s=t(2115),n=t(6766),c=t(5695),l=t(7634),o=t.n(l),r=t(7185),d=t(3268);let _=e=>{let{projectId:a,sectorId:t}=e,l=(0,c.useRouter)(),[_,p]=(0,s.useState)([]),[g,u]=(0,s.useState)(!0),[h,m]=(0,s.useState)(1),[v,x]=(0,s.useState)(new Set),N=(0,r.B)(),{lang:j}=(0,d.o)();(0,s.useEffect)(()=>{(async()=>{u(!0);try{let e=new URLSearchParams({project_id:a||"",sector_id:t||""}),i="".concat("https://app.mosaic-hrd.org/api","/centers/paginated?").concat(e.toString());console.log("Fetching from URL:",i);let s=await fetch(i,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Accept-Language":j}});if(console.log("Response status:",s.status),!s.ok)throw Error("Failed to fetch: ".concat(s.statusText));let n=await s.json();console.log("Centers API Response:",n),n&&n.data&&Array.isArray(n.data.centers)?(console.log("Processed centers data:",n.data.centers),p(n.data.centers)):(console.log("No centers found in response"),p([]))}catch(e){console.error("Failed to fetch centers:",e),p([])}finally{u(!1)}})()},[j,a,t]);let y=Math.ceil(_.length/4),S=e=>{m(e)},f=4*h,A=_.slice(f-4,f),w=e=>{l.push("/About-Us?id=".concat(e))},C=e=>{x(a=>new Set(a).add(e))},b=()=>"/Activities.jpg";return g?(0,i.jsxs)("div",{className:o().container,children:[(0,i.jsx)("h1",{className:o().title,children:N("centers")}),(0,i.jsx)("div",{className:o().loadingMessage,children:"ar"===j?"جاري التحميل...":"Loading..."})]}):0===_.length?(0,i.jsxs)("div",{className:o().container,children:[(0,i.jsx)("h1",{className:o().title,children:N("centers")}),(0,i.jsx)("div",{className:o().noDataMessage,children:"ar"===j?"لا توجد مراكز متاحة":"No centers available"})]}):(0,i.jsxs)("div",{className:o().container,children:[(0,i.jsx)("h1",{className:o().title,children:N("centers")}),(0,i.jsx)("div",{className:o().centersGrid,children:A.map(e=>(0,i.jsxs)("div",{className:o().centerCard,onClick:()=>w(e.id),children:[(0,i.jsx)("div",{className:o().imageWrapper,children:(0,i.jsx)(n.default,{src:v.has(e.id)?b():e.image,alt:e.name,width:500,height:400,className:o().image,onError:()=>C(e.id),priority:2>A.indexOf(e),sizes:"(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 25vw"})}),(0,i.jsx)("h3",{className:o().centerTitle,children:e.name})]},e.id))}),y>1&&(0,i.jsxs)("div",{className:o().pagination,children:[(0,i.jsx)("button",{onClick:()=>S(h-1),disabled:1===h,className:o().paginationButton,children:"ar"===j?"السابق":"Previous"}),[...Array(y)].map((e,a)=>{let t=a+1,s=h===t;return 1===t||t===y||1>=Math.abs(t-h)?(0,i.jsx)("button",{onClick:()=>S(t),className:"".concat(o().paginationButton," ").concat(s?o().active:""),children:t},t):2===t&&h>3?(0,i.jsx)("span",{className:o().paginationEllipsis,children:"..."},"ellipsis-start"):t===y-1&&h<y-2?(0,i.jsx)("span",{className:o().paginationEllipsis,children:"..."},"ellipsis-end"):null}),(0,i.jsx)("button",{onClick:()=>S(h+1),disabled:h===y,className:o().paginationButton,children:"ar"===j?"التالي":"Next"})]})]})}},5089:(e,a,t)=>{"use strict";t.d(a,{default:()=>c});var i=t(5155),s=t(8453),n=t.n(s);function c(e){let{text:a="جاري التحميل",subtext:t="يرجى الانتظار قليلاً",size:s="medium",className:c=""}=e;return(0,i.jsxs)("div",{className:"".concat(n().loadingContainer," ").concat(n()[s]," ").concat(c),children:[(0,i.jsx)("div",{className:n().loadingSpinner}),(0,i.jsxs)("div",{className:n().loadingText,children:[a,(0,i.jsx)("span",{className:n().loadingDots})]}),t&&(0,i.jsx)("div",{className:n().loadingSubtext,children:t})]})}},5695:(e,a,t)=>{"use strict";var i=t(8999);t.o(i,"usePathname")&&t.d(a,{usePathname:function(){return i.usePathname}}),t.o(i,"useRouter")&&t.d(a,{useRouter:function(){return i.useRouter}}),t.o(i,"useSearchParams")&&t.d(a,{useSearchParams:function(){return i.useSearchParams}})},7634:e=>{e.exports={container:"Centers_container__NUYk5",title:"Centers_title__Op_Z1",centersGrid:"Centers_centersGrid__ZZJo6",centerCard:"Centers_centerCard__BCFRv",imageWrapper:"Centers_imageWrapper__0qhaG",image:"Centers_image__QUWr0",centerTitle:"Centers_centerTitle__RqYvh",pagination:"Centers_pagination__ZhDla",paginationButton:"Centers_paginationButton__oVL2v",active:"Centers_active__0_Icm",loadingMessage:"Centers_loadingMessage__Bfu0R",noDataMessage:"Centers_noDataMessage__pPspd",paginationEllipsis:"Centers_paginationEllipsis__Z_ZG_"}},8453:e=>{e.exports={loadingContainer:"Loading_loadingContainer__xYplO",loadingSpinner:"Loading_loadingSpinner__M270_",loadingPulse:"Loading_loadingPulse__Qaw_K",loadingText:"Loading_loadingText___vDh_",loadingSubtext:"Loading_loadingSubtext__wQMxs",loadingDots:"Loading_loadingDots__WkQtU",small:"Loading_small__OUu1F",medium:"Loading_medium__Pt9vT",large:"Loading_large__Xyjja"}},9100:(e,a,t)=>{"use strict";t.d(a,{A:()=>_});var i=t(5155),s=t(2115),n=t(6766),c=t(5695),l=t(2242),o=t.n(l),r=t(7185),d=t(3268);let _=e=>{let{projectId:a,sectorId:t}=e,l=(0,c.useRouter)(),[_,p]=(0,s.useState)([]),[g,u]=(0,s.useState)([]),[h,m]=(0,s.useState)(!0),[v,x]=(0,s.useState)(1),[N,j]=(0,s.useState)(1),y=(0,r.B)(),{lang:S}=(0,d.o)();(0,s.useEffect)(()=>{(async()=>{m(!0);try{let r=new URLSearchParams({search:"",project_id:a||"",sector_id:t||"",tag_id:"",page:"1",per_page:"4"}),d="https://app.mosaic-hrd.org/api",_="".concat(d,"/success-stories?").concat(r.toString());console.log("Fetching page 1 from URL:",_);let g=await fetch(_,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Accept-Language":S}});if(console.log("Response status:",g.status),!g.ok)throw Error("Failed to fetch: ".concat(g.statusText));let u=await g.json();console.log("Success Stories API Response:",u);let h=[],m=1;if(Array.isArray(u))h=u;else if(u){var e,i,s,n,c,l,o;let a=[null==(e=u.data)?void 0:e.success_stories,null==(i=u.data)?void 0:i.data,u.success_stories,u.items,u.data].find(e=>Array.isArray(e));Array.isArray(a)&&(h=a);let t=u.meta||(null==(s=u.data)?void 0:s.meta)||{},r=t.last_page||u.last_page||(null==(n=u.data)?void 0:n.last_page),d=u.total_pages||(null==(c=u.data)?void 0:c.total_pages)||r,_=t.total||u.total||(null==(l=u.data)?void 0:l.total),p=t.per_page||u.per_page||(null==(o=u.data)?void 0:o.per_page);if(Number.isFinite(d))m=Math.max(1,Number(d));else if(Number.isFinite(_)&&Number(_)>0){let e=Number(p)||4;m=Math.max(1,Math.ceil(Number(_)/e))}}if(console.log("Processed success stories data (page 1):",h),console.log("Total pages from API:",m),Number.isFinite(m)&&m>1){let e=Array.from({length:m-1},(e,a)=>a+2).map(async e=>{var i,s;let n=new URLSearchParams({search:"",project_id:a||"",sector_id:t||"",tag_id:"",page:e.toString(),per_page:"4"}),c="".concat(d,"/success-stories?").concat(n.toString()),l=await fetch(c,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Accept-Language":S}});if(!l.ok)return[];let o=await l.json(),r=[null==(i=o.data)?void 0:i.success_stories,null==(s=o.data)?void 0:s.data,o.success_stories,o.items,o.data,Array.isArray(o)?o:void 0].find(e=>Array.isArray(e));return Array.isArray(r)?r:[]});for(let a of(await Promise.all(e)))h=h.concat(a)}h.sort((e,a)=>new Date(a.publishing_date).getTime()-new Date(e.publishing_date).getTime());let v=Math.max(1,Math.ceil(((null==h?void 0:h.length)||0)/4));p(h||[]),j(v),0===h.length&&(console.log("No success stories found in response"),console.log("Available keys:",(null==u?void 0:u.data)?Object.keys(u.data):"No data object"))}catch(e){console.error("Failed to fetch success stories:",e),u([]),j(1)}finally{m(!1)}})()},[S,a,t]),(0,s.useEffect)(()=>{let e=(v-1)*4;u(_.slice(e,e+4))},[v,_]);let f=e=>{x(e)},A=e=>{l.push("/NewsDetails?id=".concat(e))};return h?(0,i.jsxs)("div",{className:o().container,children:[(0,i.jsx)("h1",{className:o().title,children:y("news")}),(0,i.jsx)("div",{className:o().loadingMessage,children:"جاري التحميل..."})]}):g&&0!==g.length?(0,i.jsxs)("div",{className:o().container,children:[(0,i.jsx)("h1",{className:o().title,children:y("news")}),(0,i.jsx)("div",{className:o().activitiesGrid,children:g.map(e=>(0,i.jsxs)("div",{className:o().activityCard,onClick:()=>A(e.id),style:{cursor:"pointer"},children:[(0,i.jsx)("div",{className:o().imageWrapper,children:(0,i.jsx)(n.default,{src:e.image,alt:e.name,width:300,height:200,className:o().image})}),(0,i.jsx)("h3",{className:o().activityTitle,children:e.name})]},e.id))}),N>1&&(0,i.jsxs)("div",{className:o().pagination,children:[(0,i.jsx)("button",{onClick:()=>f(v-1),disabled:1===v,className:o().paginationButton,children:"ar"===S?"السابق":"Previous"}),[...Array(N)].map((e,a)=>{let t=a+1,s=v===t;return 1===t||t===N||1>=Math.abs(t-v)?(0,i.jsx)("button",{onClick:()=>f(t),className:"".concat(o().paginationButton," ").concat(s?o().active:""),children:t},t):2===t&&v>3?(0,i.jsx)("span",{className:o().paginationEllipsis,children:"..."},"ellipsis-start"):t===N-1&&v<N-2?(0,i.jsx)("span",{className:o().paginationEllipsis,children:"..."},"ellipsis-end"):null}),(0,i.jsx)("button",{onClick:()=>f(v+1),disabled:v===N,className:o().paginationButton,children:"ar"===S?"التالي":"Next"})]})]}):(0,i.jsxs)("div",{className:o().container,children:[(0,i.jsx)("h1",{className:o().title,children:y("news")}),(0,i.jsx)("div",{className:o().noDataMessage,children:"لا توجد قصص نجاح متاحة"})]})}}}]);
